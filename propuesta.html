<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Edicion Especial</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS GENERALES --- */
        body {
            background-color: #1a1a1a;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Press Start 2P', cursive;
            user-select: none;
            overflow: hidden;
        }

        /* MARCO SIMPLE (El que te gustaba) */
        .game-container {
            width: 720px;
            height: 480px;
            background: #000;
            border: 4px solid #666; /* Borde gris simple */
            border-radius: 4px;
            box-shadow: 0 0 40px rgba(0,0,0,0.8);
            position: relative;
            overflow: hidden;
        }

        .screen {
            width: 100%;
            height: 100%;
            position: relative;
            background: #000;
        }

        /* --- ESCENAS --- */
        .scene {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            z-index: 10;
        }
        .active { display: flex !important; }

        /* 1. START */
        #scene-start { background: #000; color: #fff; cursor: pointer; z-index: 1000; }
        .blink { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* 2. GAME FREAK */
        #scene-gf { background: #fff; color: #000; }
        .star-anim {
            width: 12px; height: 12px; background: #FFD700; border-radius: 50%;
            position: absolute; top: -50px; right: -50px;
            box-shadow: 0 0 10px #FFD700;
        }
        @keyframes starFall {
            0% { top: -20px; right: -20px; opacity: 1; }
            50% { top: 50%; right: 50%; opacity: 1; }
            100% { top: 120%; right: 120%; opacity: 0; }
        }

        /* 3. TITULO (FONDO SIMPLE Y FOTO FAMILIAR) */
        #scene-title {
            /* Fondo de cuadros verde clasico */
            background-color: #a8e4a0;
            background-image: linear-gradient(45deg, #7dbc74 25%, transparent 25%, transparent 75%, #7dbc74 75%, #7dbc74),
                              linear-gradient(45deg, #7dbc74 25%, transparent 25%, transparent 75%, #7dbc74 75%, #7dbc74);
            background-size: 20px 20px;
            cursor: pointer;
        }
        
        .family-photo {
            position: relative; width: 500px; height: 200px;
            margin-bottom: 20px;
        }
        
        .mon { position: absolute; image-rendering: pixelated; }

        /* POSICIONES ORDENADAS */
        .snorlax { width: 130px; left: 50%; transform: translateX(-50%); top: 0px; z-index: 1; }
        .charizard { width: 130px; left: 10px; top: -10px; z-index: 1; transform: scaleX(-1); }
        .gengar { width: 90px; right: 30px; top: 10px; z-index: 1; animation: float 3s infinite ease-in-out; }
        
        .bulbasaur { width: 55px; left: 120px; top: 90px; z-index: 2; }
        .squirtle { width: 55px; right: 120px; top: 90px; z-index: 2; }
        .charmander { width: 50px; right: 170px; top: 95px; z-index: 2; transform: scaleX(-1); }

        .pikachu { width: 65px; left: 180px; bottom: 10px; z-index: 3; }
        .eevee { width: 60px; right: 180px; bottom: 10px; z-index: 3; transform: scaleX(-1); }
        .jiggly { width: 45px; left: 140px; bottom: 15px; z-index: 3; }

        .logo-text { text-align: center; text-shadow: 2px 2px 0 #fff; z-index: 10;}
        .main-logo { font-size: 35px; color: #ffcb05; -webkit-text-stroke: 3px #3b4cca; display: block; margin-bottom: 10px; }
        .sub-logo { font-size: 12px; letter-spacing: 2px; color: #000; background: white; padding: 5px; border: 2px solid black; border-radius: 5px; display: inline-block;}

        /* 4. BATALLA */
        #scene-battle { background: #f8f8f8; }
        .battle-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 65%;
            background: #E0F8D0; border-bottom: 4px solid #485c52;
        }
        #trainer-red {
            position: absolute; bottom: 120px; left: 100px;
            width: 240px; image-rendering: pixelated; z-index: 5;
        }

        /* CAJA DE TEXTO SIMPLE */
        .dialog-container {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 110px;
            background: #283030; border-top: 4px solid #f8b800;
            padding: 10px; box-sizing: border-box; z-index: 10;
        }
        .dialog-box {
            background: #fff; width: 100%; height: 100%; border-radius: 4px;
            border: 2px solid #aaa; padding: 15px; box-sizing: border-box;
            color: #333; font-size: 16px; line-height: 1.6; text-align: left;
        }
        #arrow {
            position: absolute; bottom: 15px; right: 20px; color: #f8b800;
            animation: bounce 0.6s infinite; display: none;
        }

        /* OPCIONES */
        #options-menu {
            position: absolute; bottom: 120px; right: 20px;
            background: #fff; border: 3px solid #283030; border-radius: 5px;
            padding: 10px; display: none; z-index: 20; box-shadow: 5px 5px 0 rgba(0,0,0,0.4);
            color: #000; font-size: 14px; width: 100px; flex-direction: column; gap: 10px;
        }
        .option { padding: 5px; cursor: pointer; position: relative; }
        .option:hover::before { content: "▶"; position: absolute; left: -15px; color: #000; }
        
        #btn-no { position: relative; transition: all 0.1s ease; }

        /* ANIMACIONES */
        #pokeball {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            width: 50px; image-rendering: pixelated; z-index: 50;
        }
        #flash {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 60; opacity: 0; pointer-events: none;
        }

        /* 5. FIN */
        #scene-end { background: #000; text-align: center; color: white; }
        .end-sprite { width: 120px; margin-bottom: 20px; image-rendering: pixelated; animation: bounce 1s infinite; }
        .main-msg { font-size: 18px; margin-bottom: 20px; color: white; }
        .love-msg { color: #f8b800; font-size: 12px; line-height: 1.8; }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(4px); } }
        @keyframes throwAnim { 0% { transform: translate(-50%, -50%) scale(0.5) rotate(0deg); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(60) rotate(720deg); opacity: 1; } }
        @keyframes flashAnim { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }

    </style>
</head>
<body>

    <div class="game-container">
        <div class="screen">

            <div id="scene-start" class="scene active">
                <p class="blink" style="color: #0f0;">>> CLICK START <<</p>
            </div>

            <div id="scene-gf" class="scene">
                <div class="star-anim"></div>
                <h1 style="font-family: Arial; font-weight: 900; letter-spacing: 2px;">GAME FREAK</h1>
            </div>

            <div id="scene-title" class="scene">
                <div class="family-photo">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/6.gif" class="mon charizard">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/143.gif" class="mon snorlax">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/94.gif" class="mon gengar">
                    
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/1.gif" class="mon bulbasaur">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/4.gif" class="mon charmander">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/7.gif" class="mon squirtle">

                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/39.gif" class="mon jiggly">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/25.gif" class="mon pikachu">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/133.gif" class="mon eevee">
                </div>

                <div class="logo-text">
                    <span class="main-logo">POKEMON</span>
                    <span class="sub-logo">EDICION SAN VALENTIN</span>
                </div>
                <p class="blink" style="font-size: 10px; margin-top: 20px; color: #000;">PRESIONA START</p>
            </div>

            <div id="scene-battle" class="scene">
                <div class="battle-bg"></div>
                <img src="https://play.pokemonshowdown.com/sprites/trainers/red.png" id="trainer-red">
                
                <div class="dialog-container" id="dialog-area">
                    <div class="dialog-box">
                        <p id="typewriter"></p>
                        <div id="arrow">▼</div>
                    </div>
                </div>

                <div id="options-menu">
                    <div class="option" id="btn-yes">SI</div>
                    <div class="option" id="btn-no">NO</div>
                </div>

                <img id="pokeball" src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png">
                <div id="flash"></div>
            </div>

            <div id="scene-end" class="scene">
                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/133.gif" class="end-sprite">
                <p class="main-msg">¡GABITOU ATRAPADA!</p>
                <p class="love-msg">Te quiero mucho mucho<br>mucho muuuuak ^^</p>
            </div>

        </div>
    </div>

    <audio id="sfx-ting" src="https://www.myinstants.com/media/sounds/gamefreak-intro.mp3"></audio>
    <audio id="bgm-pallet" src="https://archive.org/download/pkmn-frlg-soundtrack/06%20Pallet%20Town%20Theme.mp3" loop></audio>
    <audio id="bgm-battle" src="https://archive.org/download/pkmn-frlg-soundtrack/11%20Battle%21%20%28Trainer%20Battle%29.mp3" loop></audio>
    <audio id="bgm-victory" src="https://archive.org/download/pkmn-frlg-soundtrack/12%20Victory%21%20%28Trainer%20Battle%29.mp3"></audio>
    
    <audio id="sfx-throw" src="https://github.com/PokeAPI/cries/raw/main/cries/pokemon/latest/1.ogg"></audio>
    <audio id="sfx-caught" src="https://www.myinstants.com/media/sounds/pokemon-caught.mp3"></audio>

    <script>
        // SISTEMA DE AUDIO MANUAL PARA EFECTOS SIMPLES
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const ctx = new AudioContext();

        function playTone(freq, type, duration) {
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.type = type;
            osc.frequency.value = freq;
            osc.connect(gain);
            gain.connect(ctx.destination);
            gain.gain.setValueAtTime(0.05, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + duration);
            osc.start();
            osc.stop(ctx.currentTime + duration);
        }
        function sfxBlip() { playTone(400, 'square', 0.05); }
        function sfxSelect() { playTone(600, 'square', 0.1); }
        function sfxNo() { playTone(150, 'sawtooth', 0.2); }

        // VARIABLES
        const scenes = {
            start: document.getElementById('scene-start'),
            gf: document.getElementById('scene-gf'),
            title: document.getElementById('scene-title'),
            battle: document.getElementById('scene-battle'),
            end: document.getElementById('scene-end')
        };
        const ui = {
            star: document.querySelector('.star-anim'),
            text: document.getElementById('typewriter'),
            arrow: document.getElementById('arrow'),
            options: document.getElementById('options-menu'),
            btnYes: document.getElementById('btn-yes'),
            btnNo: document.getElementById('btn-no'),
            ball: document.getElementById('pokeball'),
            flash: document.getElementById('flash'),
            dialogArea: document.getElementById('dialog-area')
        };
        const audio = {
            ting: document.getElementById('sfx-ting'),
            bgmPallet: document.getElementById('bgm-pallet'),
            bgmBattle: document.getElementById('bgm-battle'),
            bgmVictory: document.getElementById('bgm-victory'),
            throw: document.getElementById('sfx-throw'),
            caught: document.getElementById('sfx-caught')
        };

        const script = [
            "El entrenador CHORIPAN CON AJI te desafia.",
            "...",
            "...",
            "Mi amorcito hermoso, te elijo a ti.",
            "Hoy y siempre quiero ser tu entrenador, tu compañero de aventuras",
            "tu mejor amigo, tu todo.",
            "Asi que...",
            "...",
            "Deseas ser mi San Valentin?"
        ];
        let line = 0;
        let isTyping = false;

        function switchScene(from, to) {
            from.classList.remove('active');
            to.classList.add('active');
        }

        // 1. INICIO
        scenes.start.addEventListener('click', () => {
            ctx.resume(); 
            switchScene(scenes.start, scenes.gf);
            
            ui.star.style.animation = "starFall 2.5s ease-out forwards";
            setTimeout(() => { audio.ting.volume = 0.6; audio.ting.play(); }, 500);

            setTimeout(() => {
                switchScene(scenes.gf, scenes.title);
                audio.bgmPallet.volume = 0.5;
                audio.bgmPallet.play();
            }, 3000);
        });

        // 2. TÍTULO -> BATALLA
        scenes.title.addEventListener('click', () => {
            sfxSelect();
            audio.bgmPallet.pause();
            
            switchScene(scenes.title, scenes.battle);
            audio.bgmBattle.volume = 0.4;
            audio.bgmBattle.currentTime = 0;
            audio.bgmBattle.play();

            setTimeout(() => typeWriter(script[line]), 1000);
        });

        // TEXTO
        function typeWriter(txt) {
            isTyping = true;
            ui.text.innerHTML = "";
            ui.arrow.style.display = "none";
            let i = 0;

            const timer = setInterval(() => {
                ui.text.innerHTML += txt.charAt(i);
                if(i % 2 === 0) sfxBlip(); 
                i++;
                if(i >= txt.length) {
                    clearInterval(timer);
                    isTyping = false;
                    if(line < script.length - 1) {
                        ui.arrow.style.display = "block";
                    } else {
                        ui.options.style.display = "flex";
                    }
                }
            }, 50);
        }

        ui.dialogArea.addEventListener('click', () => {
            if(!isTyping && line < script.length - 1) {
                sfxSelect();
                line++;
                typeWriter(script[line]);
            }
        });

        // BOTON NO
        ui.btnNo.addEventListener('mouseover', () => {
            sfxNo();
            const x = (Math.random() - 0.5) * 100;
            const y = (Math.random() - 0.5) * 100;
            ui.btnNo.style.transform = `translate(${x}px, ${y}px)`;
        });

        // BOTON SI
        ui.btnYes.addEventListener('click', () => {
            sfxSelect();
            ui.options.style.display = 'none';
            ui.text.innerHTML = "";
            audio.bgmBattle.pause();

            audio.throw.play();
            ui.ball.style.animation = "throwAnim 0.8s ease-in forwards";

            setTimeout(() => {
                ui.flash.style.animation = "flashAnim 0.5s forwards";
                audio.caught.play();
            }, 700);

            setTimeout(() => {
                switchScene(scenes.battle, scenes.end);
                audio.bgmVictory.volume = 0.5;
                audio.bgmVictory.play();
            }, 1500);
        });

    </script>
</body>
</html>